---
import { ShareIcon, ExternalLinkIcon } from '@heroicons/react/outline';
import BaseHead from './BaseHead.astro';
import { NavBar } from '../components/NavBar.tsx';
import { TableOfContents } from '../components/TableOfContents.tsx';
import Footer from '../components/Footer.astro';
import { REPO_URL, SHOWCASE_REPO_URL } from '../config';
import { GitHubIcon } from '../icons';
import { parseKit } from '../lib/parseKits';
const { content } = Astro.props;
const path = Astro.site.pathname;
const headers = content?.astro?.headers;
const kit = parseKit(content);
---

<html>
  <head>
    <meta charset="UTF-8" />
    <title>{kit.name} - {kit.description}</title>
    <meta name="description" content={kit.description} />
    <BaseHead />
  </head>
  <body class="bg dark:dark-bg min-h-screen text-base">
    <header>
      <NavBar currentPath={path} client:load />
      <div class="bg-gray-200 dark:bg-gray-800 flex flex-row p-4 items-center">
        <div class="space-x-4">
          <a class="link text-sm" href="#"
            ><span class="underline">Share Kit</span><ShareIcon
              className="h-3.5 w-3.5 inline ml-1 mb-[2px]"
            /></a
          >
          <a class="link text-sm underline" href="#">Have a question?</a>
        </div>
        <div class="ml-auto space-x-4">
          <a
            class="link text-sm"
            href={`${SHOWCASE_REPO_URL}/tree/main/${kit.name}`}
            target="_blank"
            ><span class="underline">View Showcase</span>
            <ExternalLinkIcon className="h-3.5 w-3.5 inline ml-0.5 mb-[2px]" />
          </a>
          <a
            class="btn btn-primary text-sm"
            href={`${REPO_URL}/tree/main/starters/${kit.name}`}
            >Download Kit <GitHubIcon
              className="h-3.5 w-3.5 inline ml-2.5 mb-px"
            /></a
          >
        </div>
      </div>
    </header>
    <main>
      <div class="grid grid-cols-12 gap-x-24 max-w-screen-2xl pl-4 pr-4">
        <aside class="hidden lg:block col-span-3">
          <div
            class="pt-8 sticky top-0 border-r border-gray-400 dark:border-gray-700 min-h-[calc(100vh-120px)] overflow-y-auto"
          >
            <TableOfContents {headers} client:load />
          </div>
        </aside>
        <article
          class="col-span-12 lg:col-span-9 p-4 my-10 max-w-screen-2xl mx-auto prose prose-p:t dark:prose-p:dark-t prose-li:t dark:prose-li:dark-t prose-a:link prose-headings:t-dark dark:prose-headings:dark-t-light prose prose-h1:font-medium prose-h1:border-b prose-h1:pb-4 prose-h1:border-gray-200 dark:prose-h1:border-gray-800 prose-h1:text-3xl prose-h2:heading-3 prose-h2:font-semibold prose-h2:mt-12 prose-h3:heading-4 prose-pre:dark-bg prose-pre:text-white dark:prose-pre:bg-gray-800 dark:prose-code:text-white"
        >
          <slot />
        </article>
      </div>
    </main>
    <footer>
      <Footer />
    </footer>
  </body>
</html>
